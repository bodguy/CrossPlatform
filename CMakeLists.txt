cmake_minimum_required(VERSION 3.9)
project(CrossPlatform)

set(CMAKE_CXX_STANDARD 14)
set(GLEW_INCLUDE_DIRS "Libraries/include/GL/")
set(SOURCE_PREFIX "Source/")

if(APPLE)
    message(STATUS ">>>[Platform detected]: Macos")
    include_directories(/System/Library/Frameworks)
    find_library(COCOA_LIBRARY Cocoa)
    find_library(OpenGL_LIBRARY OpenGL)
    mark_as_advanced(COCOA_LIBRARY OpenGL_LIBRARY)
    set(EXTRA_LIBS ${COCOA_LIBRARY} ${OpenGL_LIBRARY})
    set(GLEW_IBRARIES "Libraries/lib/Mac/")
endif(APPLE)

if(LINUX)
    message(STATUS ">>>[Platform detected]: Linux")
    include_directories(/usr/X11R6/include/)
    link_directories(/usr/X11R6/lib)
    set(EXTRA_LIBS GL X11 GLU)
    set(GLEW_IBRARIES "Libraries/lib/Linux/")
endif(LINUX)

if(WIN32)
    message(STATUS ">>>[Platform detected]: Windows")
    set(GLEW_IBRARIES "Libraries/lib/Win32/")
endif(WIN32)

find_package(GLEW REQUIRED)
if(GLEW_FOUND)
    message(STATUS ">>>[Library linking]: GLEW linking")
    include_directories(${GLEW_INCLUDE_DIRS})
    link_libraries(${GLEW_LIBRARIES})
endif()

file(GLOB SOURCE_FILES ${SOURCE_PREFIX}*.cpp ${SOURCE_PREFIX}*.h ${SOURCE_PREFIX}*.mm)
add_executable(${CMAKE_PROJECT_NAME} ${SOURCE_FILES})
target_link_libraries(${CMAKE_PROJECT_NAME} ${EXTRA_LIBS})
